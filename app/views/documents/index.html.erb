<h1><%= t("document_list") %><%= h_count_objects(@documents) %></h1>
<table class='menu_bas'>
	<tr>
		<td> <%= link_to t("new_document"), new_document_path %></td>
		<td> <%= show_help("help_documents") %></td>
	</tr>
</table>
<%= form_simple_query_helper('/documents', @documents) %>
<%= will_paginate(@documents[:recordset]) %>
<table>
	<tr>
		<th></th>
		<th <%= sort_td_class_helper "ident" %>>
		<%= sort_link_helper t("label_ident"), "ident" %></th>
		<th <%= sort_td_class_helper "typesobject_id" %>>
		<%= sort_link_helper t("label_typesobject"), "typesobject_id" %></th>
		<th <%= sort_td_class_helper "revision" %>>
		<%= sort_link_helper t("label_revision"), "revision" %></th>
		<th <%= sort_td_class_helper "designation" %>>
		<%= sort_link_helper t("label_designation"), "designation" %></th>
		<th <%= sort_td_class_helper "statusobject_id" %>>
		<%= sort_link_helper t("label_statusobject"), "statusobject_id" %></th>
		<th <%= sort_td_class_helper "owner_id" %>>
		<%= sort_link_helper t("label_responsible"), "owner_id" %></th>
		<th> <%= t("label_nbfiles") %></th>
		<th <%= sort_td_class_helper "date" %>>
		<%= sort_link_helper t("label_date"), "date" %></th>
		<th></th>
		<th></th>
		<th></th>
		<th></th>
	</tr>
	<% previous=nil
	@documents[:recordset].each do |document| %>
	<tr>
		<td> <%= icone(document) %></td>
		<td> <%= h_if_differ(document , previous,  "ident") %>
		</td>
		<td> <% if(document.typesobject != nil) %>
		<%= h_if_differ(document , previous,  "typesobject.name") %>
		<% end %></td>
		<td> <%= h_if_differ(document , previous,  "revision") %> </td>
		<td> <%= h_if_differ(document , previous,  "designation") %> </td>
		<td> <% if(document.statusobject != nil) %>
		<%= h_if_differ(document , previous,  "statusobject.name") %>
		<% end %></td>
		<td>  <%= h_if_differ(document , previous,  "owner.login") %>
		<td> <%= h document.datafile.length %></td>
		<td> <%= h_if_differ(document , previous,  "date") %> </td>
		<td> <%= link_to h_img_show.to_s, document %></td>
		<% if document.frozen? %>
		<td> <%= link_to h_img_revise.to_s, :id => document.id, :action => :revise , :confirm => t("msg_confirm") %></td>
		<td></td>
		<% else %>
		<td> <%= link_to h_img_edit.to_s, edit_document_path(document) %></td>
		<td> <%= link_to h_img_destroy.to_s, document, :confirm => t("msg_confirm"), :method => :delete %></td>
		<% end %>
		</td>
		<td><% if connected %>
		<%= link_to_remote h_img(:copy).to_s, :url => {:action => :add_favori, :id => document.id} %>
		<%end%></td>
	</tr>
	<% previous=document %>
	<% end %>
</table>
<%= will_paginate(@documents[:recordset]) %>
