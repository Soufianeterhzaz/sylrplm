<h1><%= t("document_list") %><%=h_count_objects(@documents)%> </h1>
<table class='menu_bas'>
    <tr>
        <td>
            <%= link_to t("new_document"), new_document_path %>
        </td>
         <td>
            <%= show_help("help_documents") %>
        </td>
    </tr>
</table>
<%= form_simple_query_helper('/documents', @documents) %>
<%= will_paginate(@documents[:recordset]) %>
<table>
    <tr>
        <th>
        </th>
        <th <%= sort_td_class_helper "ident" %>>
            <%= sort_link_helper t("label_ident"), "ident" %>
        </th>
        <th <%= sort_td_class_helper "typesobject_id" %>>
            <%= sort_link_helper t("label_typesobject"), "typesobject_id" %>
        </th>
        <th <%= sort_td_class_helper "revision" %>>
            <%= sort_link_helper t("label_revision"), "revision" %>
        </th>
        <th <%= sort_td_class_helper "designation" %>>
            <%= sort_link_helper t("label_designation"), "designation" %>
        </th>
        <th <%= sort_td_class_helper "statusobject_id" %>>
            <%= sort_link_helper t("label_statusobject"), "statusobject_id" %>
        </th>
        <th <%= sort_td_class_helper "owner" %>>
            <%= sort_link_helper t("label_responsible"), "owner" %>
        </th>
        <th>
            <%= t("label_nbfiles") %>
        </th>
        <th <%= sort_td_class_helper "date" %>>
            <%= sort_link_helper t("label_date"), "date" %>
        </th>
        <th>
        </th>
        <th>
        </th>
        <th>
        </th>
        <th>
        </th>
    </tr>
    <% @documents[:recordset].each do |document| %>
    <tr>
    <td>
        <%= icone(document) %>
    </td>
    <td>
        <%=h document.ident %>
    </td>
    <td>
        <% if(document.typesobject != nil) %>
        <%=h document.typesobject.name %>
        <% end %>
    </td>
    <td>
        <%=h document.revision %>
    </td>
    <td>
        <%=h document.designation[0..20] %>
    </td>
    <td>
        <% if(document.statusobject != nil) %>
        <%=h document.statusobject.name %>
        <% end %>
    </td>
    <td>
        <%=h document.owner.login %>
    </td>   
		<td>
        <%=h document.datafile.length %>
    </td>
    <td>
        <%=l document.date %>
    </td>
    <td>
        <%= link_to h_img_show.to_s, document %>
    </td>
    <% if document.frozen? %>
    <td>
        <%= link_to h_img_revise.to_s, :id => document.id, :action => :revise , :confirm => t("msg_confirm") %>
    </td>
    <td>
    </td>
    <% else %>
    <td>
        <%= link_to h_img_edit.to_s, edit_document_path(document) %>
    </td>
    <td>
        <%= link_to h_img_destroy.to_s, document, :confirm => t("msg_confirm"), :method => :delete %>
    </td>
    <% end %>
    </td>
    <td>
        <%= link_to_remote h_img(:copy).to_s, :url => {:action => :add_document_to_favori, :id => document.id} %>
    </td>
</tr>
<%end %>
</table>
<%= will_paginate(@documents[:recordset]) %>

