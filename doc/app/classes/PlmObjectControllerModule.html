<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: PlmObjectControllerModule</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">PlmObjectControllerModule</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/controllers/plm_object_controller_module_rb.html">
                app/controllers/plm_object_controller_module.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000359">ctrl_add_forum</a>&nbsp;&nbsp;
      <a href="#M000343">ctrl_demote</a>&nbsp;&nbsp;
      <a href="#M000342">ctrl_promote</a>&nbsp;&nbsp;
      <a href="#M000341">ctrl_revise</a>&nbsp;&nbsp;
      <a href="#M000353">follow_tree_customer</a>&nbsp;&nbsp;
      <a href="#M000351">follow_tree_part</a>&nbsp;&nbsp;
      <a href="#M000354">follow_tree_project</a>&nbsp;&nbsp;
      <a href="#M000352">follow_tree_up_part</a>&nbsp;&nbsp;
      <a href="#M000355">follow_tree_up_project</a>&nbsp;&nbsp;
      <a href="#M000347">icone</a>&nbsp;&nbsp;
      <a href="#M000348">img</a>&nbsp;&nbsp;
      <a href="#M000350">img_cut</a>&nbsp;&nbsp;
      <a href="#M000349">img_destroy</a>&nbsp;&nbsp;
      <a href="#M000358">remove_link</a>&nbsp;&nbsp;
      <a href="#M000346">tree_customer</a>&nbsp;&nbsp;
      <a href="#M000356">tree_documents</a>&nbsp;&nbsp;
      <a href="#M000357">tree_forums</a>&nbsp;&nbsp;
      <a href="#M000344">tree_part</a>&nbsp;&nbsp;
      <a href="#M000345">tree_project</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000359" class="method-detail">
        <a name="M000359"></a>

        <div class="method-heading">
          <a href="#M000359" class="method-signature">
          <span class="method-name">ctrl_add_forum</span><span class="method-args">(object,type)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000359-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000359-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 391</span>
391:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ctrl_add_forum</span>(<span class="ruby-identifier">object</span>,<span class="ruby-identifier">type</span>)
392:     <span class="ruby-identifier">relation</span>=<span class="ruby-value str">&quot;forum&quot;</span>
393:     <span class="ruby-identifier">error</span>=<span class="ruby-keyword kw">false</span>
394:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>      
395:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;&quot;</span>
396:       <span class="ruby-ivar">@forum</span>=<span class="ruby-constant">Forum</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:forum</span>])
397:       <span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">creator</span>=<span class="ruby-ivar">@user</span>
398:       <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">save</span>)
399:         <span class="ruby-identifier">item</span>=<span class="ruby-constant">ForumItem</span>.<span class="ruby-identifier">createNew</span>(<span class="ruby-ivar">@forum</span>, <span class="ruby-identifier">params</span>)
400:         <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">item</span>.<span class="ruby-identifier">save</span>)
401:           <span class="ruby-identifier">link_</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">createNew</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">object</span>, <span class="ruby-value str">&quot;forum&quot;</span>, <span class="ruby-ivar">@forum</span>, <span class="ruby-identifier">relation</span>)  
402:           <span class="ruby-identifier">link</span>=<span class="ruby-identifier">link_</span>[<span class="ruby-identifier">:link</span>]
403:           <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">link!</span>=<span class="ruby-keyword kw">nil</span>) 
404:             <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">save</span>)
405:               <span class="ruby-comment cmt">#flash[:notice] += &quot;&lt;br&gt; forum #{@forum.subject} was successfully added:rel=#{relation}:#{link_[:msg]}&quot;</span>
406:               <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_added</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_forum</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">subject</span>,<span class="ruby-identifier">:relation=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">relation</span>,<span class="ruby-identifier">:msg=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">link_</span>[<span class="ruby-identifier">:msg</span>]))
407:             <span class="ruby-keyword kw">else</span>
408:               <span class="ruby-comment cmt">#flash[:notice] += &quot;&lt;br&gt; forum #{@forum.subject} was not added:rel=#{relation}:#{link_[:msg]}&quot;</span>
409:               <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_not_added</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_forum</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">subject</span>,<span class="ruby-identifier">:relation=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">relation</span>,<span class="ruby-identifier">:msg=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">link_</span>[<span class="ruby-identifier">:msg</span>]))
410:               <span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">destroy</span>
411:               <span class="ruby-identifier">error</span>=<span class="ruby-keyword kw">true</span>
412:             <span class="ruby-keyword kw">end</span> 
413:           <span class="ruby-keyword kw">else</span>
414:             <span class="ruby-comment cmt">#flash[:notice] += &quot;&lt;br&gt; link #{@forum.subject} was not created:rel=#{relation}:#{link_[:msg]}&quot;</span>
415:             <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_not_linked</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_forum</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">subject</span>,<span class="ruby-identifier">:relation=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">relation</span>,<span class="ruby-identifier">:msg=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">nil</span>)
416:             <span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">destroy</span> 
417:             <span class="ruby-identifier">error</span>=<span class="ruby-keyword kw">true</span>
418:           <span class="ruby-keyword kw">end</span>
419:         <span class="ruby-keyword kw">else</span>
420:           <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_not_created</span>, <span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_forum_item</span>))
421:           <span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">destroy</span> 
422:           <span class="ruby-identifier">error</span>=<span class="ruby-keyword kw">true</span>
423:         <span class="ruby-keyword kw">end</span>
424:       <span class="ruby-keyword kw">else</span>
425:         <span class="ruby-comment cmt">#flash[:notice] += &quot;&lt;br&gt; forum #{@forum.subject} was not saved:rel=#{relation}:#{link_[:msg]}&quot;</span>
426:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_not_saved</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_forum</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@forum</span>.<span class="ruby-identifier">subject</span>,<span class="ruby-identifier">:relation=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">relation</span>,<span class="ruby-identifier">:msg=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">link_</span>[<span class="ruby-identifier">:msg</span>])
427:         <span class="ruby-identifier">error</span>=<span class="ruby-keyword kw">true</span>
428:       <span class="ruby-keyword kw">end</span>
429:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">error</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">false</span>
430:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">object</span>) }
431:       <span class="ruby-keyword kw">else</span>
432:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">'PartController.add_forum:id='</span><span class="ruby-operator">+</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span>
433:         <span class="ruby-ivar">@types</span>=<span class="ruby-constant">Typesobject</span>.<span class="ruby-identifier">find_for</span>(<span class="ruby-value str">&quot;forum&quot;</span>)
434:         <span class="ruby-ivar">@status</span>= <span class="ruby-constant">Statusobject</span>.<span class="ruby-identifier">find_for</span>(<span class="ruby-value str">&quot;forum&quot;</span>)
435:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span>  <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:new_forum</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">id</span>   }
436:       <span class="ruby-keyword kw">end</span>
437:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }
438:     <span class="ruby-keyword kw">end</span>
439:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000343" class="method-detail">
        <a name="M000343"></a>

        <div class="method-heading">
          <a href="#M000343" class="method-signature">
          <span class="method-name">ctrl_demote</span><span class="method-args">(model, withMail=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000343-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000343-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 81</span>
 81:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ctrl_demote</span>(<span class="ruby-identifier">model</span>, <span class="ruby-identifier">withMail</span>=<span class="ruby-keyword kw">true</span>)
 82:     <span class="ruby-identifier">object</span> = <span class="ruby-identifier">model</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
 83:     <span class="ruby-identifier">current_rank</span>=<span class="ruby-identifier">object</span>.<span class="ruby-identifier">statusobject</span>.<span class="ruby-identifier">name</span>
 84:     <span class="ruby-identifier">object</span>.<span class="ruby-identifier">demote</span>
 85:     <span class="ruby-identifier">new_rank</span>=<span class="ruby-identifier">object</span>.<span class="ruby-identifier">statusobject</span>.<span class="ruby-identifier">name</span>
 86:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
 87:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_rank!</span>=<span class="ruby-identifier">new_rank</span>
 88:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">save</span>
 89:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">withMail</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">true</span>
 90:             <span class="ruby-identifier">askUserMail</span>=<span class="ruby-identifier">object</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">email</span>
 91:             <span class="ruby-identifier">email</span>=<span class="ruby-keyword kw">nil</span> 
 92:             <span class="ruby-identifier">validers</span>=<span class="ruby-constant">User</span>.<span class="ruby-identifier">find_validers</span>             
 93:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">isToValidate</span>
 94:               <span class="ruby-identifier">validersMail</span>=<span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">listUserMail</span>(<span class="ruby-identifier">validers</span>)
 95:               <span class="ruby-identifier">email</span>=<span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">create_docToValidate</span>(<span class="ruby-identifier">object</span>, <span class="ruby-ivar">@usermail</span>, <span class="ruby-ivar">@urlbase</span>, <span class="ruby-identifier">validersMail</span>) 
 96:             <span class="ruby-keyword kw">end</span>
 97:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">isFreeze</span>
 98:               <span class="ruby-identifier">validersMail</span>=<span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">listUserMail</span>(<span class="ruby-identifier">validers</span>,<span class="ruby-ivar">@user</span>)
 99:               <span class="ruby-identifier">email</span>=<span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">create_docValidated</span>(<span class="ruby-identifier">object</span>, <span class="ruby-ivar">@usermail</span>, <span class="ruby-ivar">@urlbase</span>, <span class="ruby-identifier">askUserMail</span>, <span class="ruby-identifier">validersMail</span>)
100:             <span class="ruby-keyword kw">end</span>
101:             <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">email!</span>=<span class="ruby-keyword kw">nil</span>)
102:               <span class="ruby-identifier">email</span>.<span class="ruby-identifier">set_content_type</span>(<span class="ruby-value str">&quot;text/html&quot;</span>)
103:               <span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">deliver</span>(<span class="ruby-identifier">email</span>)
104:             <span class="ruby-keyword kw">end</span>
105:           <span class="ruby-keyword kw">end</span>
106:           <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_demoted</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">ident</span>,<span class="ruby-identifier">:current_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">current_rank</span>,<span class="ruby-identifier">:new_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">new_rank</span>,<span class="ruby-identifier">:validersMail=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">validersMail</span>)
107:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">object</span>) }
108:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }
109:         <span class="ruby-keyword kw">else</span>
110:           <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_not_demoted</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">ident</span>,<span class="ruby-identifier">:current_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">current_rank</span>,<span class="ruby-identifier">:new_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">new_rank</span>)
111:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;edit&quot;</span> }
112:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:unprocessable_entity</span> }
113:         <span class="ruby-keyword kw">end</span>
114:       <span class="ruby-keyword kw">else</span>
115:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_not_demoted</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">ident</span>,<span class="ruby-identifier">:current_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">current_rank</span>,<span class="ruby-identifier">:new_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">new_rank</span>,<span class="ruby-identifier">:validersMail=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">validersMail</span>)
116:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">object</span>) }
117:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }
118:       <span class="ruby-keyword kw">end</span>
119:     <span class="ruby-keyword kw">end</span>
120:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000342" class="method-detail">
        <a name="M000342"></a>

        <div class="method-heading">
          <a href="#M000342" class="method-signature">
          <span class="method-name">ctrl_promote</span><span class="method-args">(object, withMail=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
def <a
href="PlmObjectControllerModule.html#M000342">ctrl_promote</a>(model,
params, withMail=true)
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000342-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000342-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 31</span>
31:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ctrl_promote</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">withMail</span>=<span class="ruby-keyword kw">true</span>)
32:     <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;plm_object_controller.ctrl_promote:&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">inspect</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot; &quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">withMail</span>.<span class="ruby-identifier">to_s</span>
33:     <span class="ruby-identifier">email_ok</span>=<span class="ruby-keyword kw">true</span>
34:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">withMail</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">true</span>
35:       <span class="ruby-identifier">askUserMail</span>=<span class="ruby-identifier">object</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">email</span>
36:       <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;plm_object_controller.ctrl_promote:&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">askUserMail</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;|&quot;</span>
37:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">askUserMail</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
38:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;plm_object_controller.ctrl_promote:pas de mail&quot;</span>
39:         <span class="ruby-identifier">email_ok</span>=<span class="ruby-keyword kw">false</span>
40:       <span class="ruby-keyword kw">end</span>
41:     <span class="ruby-keyword kw">end</span>
42:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
43:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">email_ok</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">true</span>
44:         <span class="ruby-identifier">current_rank</span>=<span class="ruby-identifier">object</span>.<span class="ruby-identifier">statusobject</span>.<span class="ruby-identifier">name</span>
45:         <span class="ruby-identifier">object</span>.<span class="ruby-identifier">promote</span>
46:         <span class="ruby-identifier">new_rank</span>=<span class="ruby-identifier">object</span>.<span class="ruby-identifier">statusobject</span>.<span class="ruby-identifier">name</span>
47:         <span class="ruby-identifier">current_rank!</span>=<span class="ruby-identifier">new_rank</span>
48:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">save</span>
49:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">withMail</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">true</span>
50:             <span class="ruby-identifier">email</span>=<span class="ruby-keyword kw">nil</span> 
51:             <span class="ruby-identifier">validers</span>=<span class="ruby-constant">User</span>.<span class="ruby-identifier">find_validers</span>             
52:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">isToValidate</span>
53:               <span class="ruby-identifier">validersMail</span>=<span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">listUserMail</span>(<span class="ruby-identifier">validers</span>)
54:               <span class="ruby-identifier">email</span>=<span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">create_toValidate</span>(<span class="ruby-identifier">object</span>, <span class="ruby-ivar">@usermail</span>, <span class="ruby-ivar">@urlbase</span>, <span class="ruby-identifier">validersMail</span>) 
55:             <span class="ruby-keyword kw">end</span>
56:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">isFreeze</span>
57:               <span class="ruby-identifier">validersMail</span>=<span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">listUserMail</span>(<span class="ruby-identifier">validers</span>,<span class="ruby-ivar">@user</span>)
58:               <span class="ruby-identifier">email</span>=<span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">create_validated</span>(<span class="ruby-identifier">object</span>, <span class="ruby-ivar">@usermail</span>, <span class="ruby-ivar">@urlbase</span>, <span class="ruby-identifier">askUserMail</span>, <span class="ruby-identifier">validersMail</span>)
59:             <span class="ruby-keyword kw">end</span>
60:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">email!</span>=<span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">email!</span>=<span class="ruby-value str">&quot;&quot;</span>
61:               <span class="ruby-identifier">email</span>.<span class="ruby-identifier">set_content_type</span>(<span class="ruby-value str">&quot;text/html&quot;</span>)
62:               <span class="ruby-constant">PlmMailer</span>.<span class="ruby-identifier">deliver</span>(<span class="ruby-identifier">email</span>)
63:             <span class="ruby-keyword kw">end</span>
64:           <span class="ruby-keyword kw">end</span>
65:           <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_promoted</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">ident</span>,<span class="ruby-identifier">:current_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">current_rank</span>,<span class="ruby-identifier">:new_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">new_rank</span>,<span class="ruby-identifier">:validersMail=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">validersMail</span>)
66:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">object</span>) }
67:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }
68:         <span class="ruby-keyword kw">else</span>
69:           <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_not_promoted</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">ident</span>,<span class="ruby-identifier">:current_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">current_rank</span>,<span class="ruby-identifier">:new_rank=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">new_rank</span>,<span class="ruby-identifier">:validersMail=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">validersMail</span>)
70:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;edit&quot;</span> }
71:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:unprocessable_entity</span> }
72:         <span class="ruby-keyword kw">end</span>
73:       <span class="ruby-keyword kw">else</span>
74:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_user_no_email</span>,<span class="ruby-identifier">:user=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">login</span>)
75:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;edit&quot;</span> }
76:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:unprocessable_entity</span> }        
77:       <span class="ruby-keyword kw">end</span>
78:     <span class="ruby-keyword kw">end</span>
79:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000341" class="method-detail">
        <a name="M000341"></a>

        <div class="method-heading">
          <a href="#M000341" class="method-signature">
          <span class="method-name">ctrl_revise</span><span class="method-args">(model)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000341-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000341-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 3</span>
 3:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ctrl_revise</span>(<span class="ruby-identifier">model</span>)
 4:     <span class="ruby-identifier">define_variables</span>
 5:     <span class="ruby-identifier">object</span> = <span class="ruby-identifier">model</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
 6:     <span class="ruby-identifier">previous_rev</span>=<span class="ruby-identifier">object</span>.<span class="ruby-identifier">revision</span>
 7:     <span class="ruby-ivar">@object</span>=<span class="ruby-identifier">object</span>.<span class="ruby-identifier">revise</span>
 8:     <span class="ruby-ivar">@types</span>=<span class="ruby-constant">Typesobject</span>.<span class="ruby-identifier">getTypes</span>(<span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span>)
 9:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
10:       <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@object</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>)
11:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@object</span>.<span class="ruby-identifier">save</span>
12:           <span class="ruby-identifier">puts</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-value str">'.revision apres save='</span><span class="ruby-operator">+</span><span class="ruby-ivar">@object</span>.<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;:&quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@object</span>.<span class="ruby-identifier">revision</span>;
13:           <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_revised</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-ivar">@object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@object</span>.<span class="ruby-identifier">ident</span>,<span class="ruby-identifier">:previous_rev=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">previous_rev</span>,<span class="ruby-identifier">:revision=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@object</span>.<span class="ruby-identifier">revision</span>)
14:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-ivar">@object</span>) }
15:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }
16:         <span class="ruby-keyword kw">else</span>
17:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;edit&quot;</span> }
18:           <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:unprocessable_entity</span> }
19:         <span class="ruby-keyword kw">end</span>
20:       <span class="ruby-keyword kw">else</span>
21:         <span class="ruby-ivar">@object</span> = <span class="ruby-identifier">model</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
22:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_object_not_revised</span>,<span class="ruby-identifier">:object=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-ivar">@object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span>),<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@object</span>.<span class="ruby-identifier">ident</span>,<span class="ruby-identifier">:previous_rev=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">previous_rev</span>)
23:         <span class="ruby-comment cmt">#flash[:notice] = &quot;Document cannot be revised from #{previous_rev} (not last revision or not frozen status ?).&quot;</span>
24:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-ivar">@object</span>) }
25:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }        
26:       <span class="ruby-keyword kw">end</span>
27:     <span class="ruby-keyword kw">end</span>
28:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000353" class="method-detail">
        <a name="M000353"></a>

        <div class="method-heading">
          <a href="#M000353" class="method-signature">
          <span class="method-name">follow_tree_customer</span><span class="method-args">(node, obj,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000353-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000353-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 287</span>
287:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">follow_tree_customer</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj</span>,<span class="ruby-identifier">ctrl</span>)
288:     <span class="ruby-identifier">tree_documents</span>(<span class="ruby-identifier">node</span>,<span class="ruby-value str">&quot;customer&quot;</span>,<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">ctrl</span>)  
289:      <span class="ruby-identifier">tree_forums</span>(<span class="ruby-identifier">node</span>,<span class="ruby-value str">&quot;customer&quot;</span>,<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">ctrl</span>)  
290:      <span class="ruby-identifier">links</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">find_childs</span>(<span class="ruby-value str">&quot;customer&quot;</span>, <span class="ruby-identifier">obj</span>,  <span class="ruby-value str">&quot;project&quot;</span>)
291:     <span class="ruby-identifier">links</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span>
292:       <span class="ruby-identifier">child</span>=<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">child_id</span>)
293:       <span class="ruby-identifier">pnode</span>=<span class="ruby-identifier">tree_project</span>(<span class="ruby-identifier">child</span>,<span class="ruby-identifier">link</span>,<span class="ruby-identifier">ctrl</span>)
294:       <span class="ruby-identifier">node</span><span class="ruby-operator">&lt;&lt;</span><span class="ruby-identifier">pnode</span>                  
295:         <span class="ruby-identifier">follow_tree_project</span>(<span class="ruby-identifier">pnode</span>, <span class="ruby-identifier">child</span>,<span class="ruby-identifier">ctrl</span>)
296:       <span class="ruby-keyword kw">end</span>
297:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000351" class="method-detail">
        <a name="M000351"></a>

        <div class="method-heading">
          <a href="#M000351" class="method-signature">
          <span class="method-name">follow_tree_part</span><span class="method-args">(node, part,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000351-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000351-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 207</span>
207:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">follow_tree_part</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">part</span>,<span class="ruby-identifier">ctrl</span>)
208:     <span class="ruby-comment cmt">#part.projects.each do |d|</span>
209:     <span class="ruby-comment cmt">#  cnode = tree_project(d)        </span>
210:     <span class="ruby-comment cmt">#  node &lt;&lt; cnode</span>
211:     <span class="ruby-comment cmt">#non car bouclage follow_tree_project(node,d)</span>
212:     <span class="ruby-comment cmt">#end</span>
213:     <span class="ruby-identifier">tree_forums</span>(<span class="ruby-identifier">node</span>,<span class="ruby-value str">&quot;part&quot;</span>,<span class="ruby-identifier">part</span>,<span class="ruby-identifier">ctrl</span>)  
214:     <span class="ruby-identifier">tree_documents</span>(<span class="ruby-identifier">node</span>,<span class="ruby-value str">&quot;part&quot;</span>,<span class="ruby-identifier">part</span>,<span class="ruby-identifier">ctrl</span>) 
215:     <span class="ruby-identifier">links</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">find_childs</span>(<span class="ruby-value str">&quot;part&quot;</span>, <span class="ruby-identifier">part</span>,  <span class="ruby-value str">&quot;part&quot;</span>)
216:     <span class="ruby-identifier">links</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span>
217:       <span class="ruby-identifier">child</span>=<span class="ruby-constant">Part</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">child_id</span>) 
218:       <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'parts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{child.id}&quot;</span>}
219:       <span class="ruby-comment cmt">#link_to_remote= {</span>
220:       <span class="ruby-comment cmt">#       :url =&gt; url,</span>
221:       <span class="ruby-comment cmt">#       :update =&gt; &quot;content&quot;,</span>
222:       <span class="ruby-comment cmt">#       :base =&gt; self</span>
223:       <span class="ruby-comment cmt">#     }</span>
224:       <span class="ruby-comment cmt">#link_to=url</span>
225:       <span class="ruby-identifier">destroy_url</span>=<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ctrl</span>.<span class="ruby-identifier">controller_name</span>,
226:                                    <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;remove_link&quot;</span>,
227:                                    <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">link</span>.<span class="ruby-identifier">id</span>)
228:       <span class="ruby-identifier">cut_a</span>=<span class="ruby-value str">'&lt;a href=&quot;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">destroy_url</span><span class="ruby-operator">+</span><span class="ruby-value str">'&quot;&gt;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">img_cut</span><span class="ruby-operator">+</span><span class="ruby-value str">'&lt;/a&gt;'</span> 
229:       <span class="ruby-identifier">options</span>={
230:                 <span class="ruby-identifier">:label</span>  =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">link</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">||</span><span class="ruby-value str">'no_relation'</span>)<span class="ruby-operator">+</span><span class="ruby-value str">'-'</span><span class="ruby-operator">+</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_part</span>)<span class="ruby-operator">+</span><span class="ruby-value str">':'</span><span class="ruby-operator">+</span><span class="ruby-identifier">child</span>.<span class="ruby-identifier">ident</span><span class="ruby-operator">+</span><span class="ruby-identifier">cut_a</span>,
231:                 <span class="ruby-identifier">:icon=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">icone</span>(<span class="ruby-identifier">child</span>),
232:         <span class="ruby-comment cmt">#:icon_open=&gt;icone(child),</span>
233:                 <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">designation</span>,
234:                 <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>),
235:               <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
236:       }
237:       <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)          
238:       <span class="ruby-identifier">node</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cnode</span>
239:       <span class="ruby-identifier">follow_tree_part</span>(<span class="ruby-identifier">cnode</span>, <span class="ruby-identifier">child</span>,<span class="ruby-identifier">ctrl</span>) 
240:     <span class="ruby-keyword kw">end</span>
241:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000354" class="method-detail">
        <a name="M000354"></a>

        <div class="method-heading">
          <a href="#M000354" class="method-signature">
          <span class="method-name">follow_tree_project</span><span class="method-args">(node, obj,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000354-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000354-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 299</span>
299:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">follow_tree_project</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj</span>,<span class="ruby-identifier">ctrl</span>)
300:     <span class="ruby-identifier">tree_documents</span>(<span class="ruby-identifier">node</span>,<span class="ruby-value str">&quot;project&quot;</span>,<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">ctrl</span>) 
301:     <span class="ruby-identifier">tree_forums</span>(<span class="ruby-identifier">node</span>,<span class="ruby-value str">&quot;project&quot;</span>,<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">ctrl</span>)  
302:     <span class="ruby-comment cmt">#if(obj.customer!=nil)</span>
303:     <span class="ruby-comment cmt">#    cnode=tree_customer(obj.customer)</span>
304:     <span class="ruby-comment cmt">#    node&lt;&lt;cnode    </span>
305:     <span class="ruby-comment cmt">#  end</span>
306:     <span class="ruby-identifier">links</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">find_childs</span>(<span class="ruby-value str">&quot;project&quot;</span>, <span class="ruby-identifier">obj</span>,  <span class="ruby-value str">&quot;part&quot;</span>)
307:     <span class="ruby-identifier">links</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span>
308:       <span class="ruby-identifier">child</span>=<span class="ruby-constant">Part</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">child_id</span>)
309:         <span class="ruby-identifier">pnode</span>=<span class="ruby-identifier">tree_part</span>(<span class="ruby-identifier">child</span>, <span class="ruby-identifier">link</span>,<span class="ruby-identifier">ctrl</span>)
310:         <span class="ruby-identifier">node</span><span class="ruby-operator">&lt;&lt;</span><span class="ruby-identifier">pnode</span>       
311:         <span class="ruby-identifier">follow_tree_part</span>(<span class="ruby-identifier">pnode</span>, <span class="ruby-identifier">child</span>,<span class="ruby-identifier">ctrl</span>)
312:       <span class="ruby-keyword kw">end</span>
313:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000352" class="method-detail">
        <a name="M000352"></a>

        <div class="method-heading">
          <a href="#M000352" class="method-signature">
          <span class="method-name">follow_tree_up_part</span><span class="method-args">(node, part,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000352-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000352-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 243</span>
243:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">follow_tree_up_part</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">part</span>,<span class="ruby-identifier">ctrl</span>)
244:     <span class="ruby-identifier">links</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">find_fathers</span>(<span class="ruby-value str">&quot;part&quot;</span>, <span class="ruby-identifier">part</span>,  <span class="ruby-value str">&quot;part&quot;</span>)
245:     <span class="ruby-identifier">links</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span>
246:       <span class="ruby-identifier">f</span>=<span class="ruby-constant">Part</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">father_id</span>) 
247:       <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'parts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{f.id}&quot;</span>}
248:       <span class="ruby-identifier">options</span>={
249:                 <span class="ruby-identifier">:label</span>  =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">link</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">||</span><span class="ruby-value str">'no_relation'</span>)<span class="ruby-operator">+</span><span class="ruby-value str">'-'</span><span class="ruby-operator">+</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_part</span>)<span class="ruby-operator">+</span><span class="ruby-value str">':'</span><span class="ruby-operator">+</span><span class="ruby-identifier">f</span>.<span class="ruby-identifier">ident</span>,
250:                 <span class="ruby-identifier">:icon=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">icone</span>(<span class="ruby-identifier">f</span>),
251:         <span class="ruby-comment cmt"># :icon_open=&gt;&quot;&quot;,</span>
252:                 <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">designation</span>,
253:                 <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>),
254:               <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
255:       }
256:       <span class="ruby-identifier">html_options</span> = {   
257:               <span class="ruby-identifier">:alt</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;alt:&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">f</span>.<span class="ruby-identifier">ident</span>
258:       }
259:       <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)          
260:       <span class="ruby-identifier">node</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cnode</span>
261:       <span class="ruby-comment cmt"># projets</span>
262:       <span class="ruby-identifier">links</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">find_fathers</span>(<span class="ruby-value str">&quot;part&quot;</span>, <span class="ruby-identifier">part</span>,  <span class="ruby-value str">&quot;project&quot;</span>)
263:       <span class="ruby-identifier">links</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span>
264:         <span class="ruby-identifier">f</span>=<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">father_id</span>) 
265:         <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'projects'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{f.id}&quot;</span>}
266:         <span class="ruby-identifier">link_to_remote</span>= {
267:                      <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url</span>,
268:                      <span class="ruby-identifier">:update</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>,
269:                      <span class="ruby-identifier">:base</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>
270:         }
271:         <span class="ruby-identifier">link_to</span>=<span class="ruby-identifier">url</span>
272:         <span class="ruby-identifier">options</span>={
273:                   <span class="ruby-identifier">:label</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:link_project</span>,<span class="ruby-identifier">:link=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">link</span>.<span class="ruby-identifier">name</span>,<span class="ruby-identifier">:ident=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">f</span>.<span class="ruby-identifier">ident</span>),
274:           <span class="ruby-comment cmt"># :icon=&gt;&quot;&quot;,</span>
275:           <span class="ruby-comment cmt"># :icon_open=&gt;&quot;&quot;,</span>
276:                   <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">designation</span>,
277:                   <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>),
278:                 <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
279:         }
280:         <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)          
281:         <span class="ruby-identifier">node</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cnode</span>
282:         
283:       <span class="ruby-keyword kw">end</span>
284:     <span class="ruby-keyword kw">end</span>
285:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000355" class="method-detail">
        <a name="M000355"></a>

        <div class="method-heading">
          <a href="#M000355" class="method-signature">
          <span class="method-name">follow_tree_up_project</span><span class="method-args">(node, project,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000355-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000355-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 315</span>
315:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">follow_tree_up_project</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">project</span>,<span class="ruby-identifier">ctrl</span>)
316:           <span class="ruby-identifier">links</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">find_fathers</span>(<span class="ruby-value str">&quot;project&quot;</span>, <span class="ruby-identifier">project</span>,  <span class="ruby-value str">&quot;customer&quot;</span>)
317:           <span class="ruby-identifier">links</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span>
318:             <span class="ruby-identifier">c</span>=<span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">father_id</span>) 
319:             <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'customers'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{c.id}&quot;</span>}
320:             <span class="ruby-identifier">options</span>={
321:                 <span class="ruby-identifier">:label</span>  =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">link</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">||</span><span class="ruby-value str">'no_relation'</span>)<span class="ruby-operator">+</span><span class="ruby-value str">'-'</span><span class="ruby-operator">+</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_customer</span>)<span class="ruby-operator">+</span><span class="ruby-value str">':'</span><span class="ruby-operator">+</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">ident</span>,
322:                 <span class="ruby-identifier">:icon=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">icone</span>(<span class="ruby-identifier">c</span>),
323:                 <span class="ruby-comment cmt"># :icon_open=&gt;&quot;&quot;,</span>
324:                 <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">designation</span>,
325:                 <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>),
326:               <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
327:             }
328:             <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)          
329:             <span class="ruby-identifier">node</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cnode</span>
330:           <span class="ruby-keyword kw">end</span>
331:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000347" class="method-detail">
        <a name="M000347"></a>

        <div class="method-heading">
          <a href="#M000347" class="method-signature">
          <span class="method-name">icone</span><span class="method-args">(obj)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000347-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000347-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 188</span>
188:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">icone</span>(<span class="ruby-identifier">obj</span>)
189:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">type!</span>=<span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">typesobject!</span>=<span class="ruby-keyword kw">nil</span>
190:       <span class="ruby-value str">&quot;../images/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;_&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">typesobject</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;.png&quot;</span>
191:     <span class="ruby-keyword kw">else</span>
192:       <span class="ruby-value str">&quot;&quot;</span>
193:     <span class="ruby-keyword kw">end</span>
194:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000348" class="method-detail">
        <a name="M000348"></a>

        <div class="method-heading">
          <a href="#M000348" class="method-signature">
          <span class="method-name">img</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000348-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000348-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 195</span>
195:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">img</span>(<span class="ruby-identifier">name</span>)
196:         <span class="ruby-value str">&quot;&lt;img class=\&quot;icone\&quot; src=\&quot;../images/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;.png\&quot;/&gt;&quot;</span>  
197:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000350" class="method-detail">
        <a name="M000350"></a>

        <div class="method-heading">
          <a href="#M000350" class="method-signature">
          <span class="method-name">img_cut</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000350-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000350-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 203</span>
203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">img_cut</span>
204:     <span class="ruby-identifier">img</span>(<span class="ruby-value str">&quot;cut&quot;</span>)
205:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000349" class="method-detail">
        <a name="M000349"></a>

        <div class="method-heading">
          <a href="#M000349" class="method-signature">
          <span class="method-name">img_destroy</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000349-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000349-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 199</span>
199:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">img_destroy</span>
200:     <span class="ruby-identifier">img</span>(<span class="ruby-value str">&quot;destroy&quot;</span>)
201:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000358" class="method-detail">
        <a name="M000358"></a>

        <div class="method-heading">
          <a href="#M000358" class="method-signature">
          <span class="method-name">remove_link</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000358-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000358-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 379</span>
379:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_link</span>
380:     <span class="ruby-identifier">link</span> = <span class="ruby-constant">Link</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
381:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>      
382:      <span class="ruby-comment cmt">#flash[:notice] = t(:ctrl_nothing_to_paste,:object=&gt;t(:ctrl_document))</span>
383:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:tree_object</span>]) }
384:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }
385:       <span class="ruby-keyword kw">end</span>
386:     <span class="ruby-comment cmt">#uri=session[:original_uri]</span>
387:     <span class="ruby-comment cmt">#session[:original_uri]=nil</span>
388:     <span class="ruby-comment cmt">#redirect_to(uri || {:controller =&gt; &quot;main&quot;, :action =&gt; &quot;index&quot;})</span>
389:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000346" class="method-detail">
        <a name="M000346"></a>

        <div class="method-heading">
          <a href="#M000346" class="method-signature">
          <span class="method-name">tree_customer</span><span class="method-args">(obj)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000346-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000346-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 171</span>
171:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tree_customer</span>(<span class="ruby-identifier">obj</span>)  
172:     <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">obj!</span>=<span class="ruby-keyword kw">nil</span>) 
173:       <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'customers'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{obj.id}&quot;</span>}
174:       <span class="ruby-identifier">options</span>={
175:                       <span class="ruby-identifier">:label</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_customer</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;:&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">ident</span>,
176:                       <span class="ruby-identifier">:icon=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">icone</span>(<span class="ruby-identifier">obj</span>),
177:         <span class="ruby-comment cmt"># :icon_open=&gt;&quot;&quot;,</span>
178:                       <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">designation</span>,
179:                       <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
180:                       <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>)
181:       }
182:       <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>,<span class="ruby-keyword kw">nil</span>)
183:     <span class="ruby-keyword kw">else</span>
184:       <span class="ruby-identifier">cnode</span>=<span class="ruby-keyword kw">nil</span>
185:     <span class="ruby-keyword kw">end</span>
186:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">cnode</span>
187:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000356" class="method-detail">
        <a name="M000356"></a>

        <div class="method-heading">
          <a href="#M000356" class="method-signature">
          <span class="method-name">tree_documents</span><span class="method-args">(node, father_object, father,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000356-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000356-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 333</span>
333:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tree_documents</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">father_object</span>, <span class="ruby-identifier">father</span>,<span class="ruby-identifier">ctrl</span>)
334:       <span class="ruby-identifier">docs</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">find_childs</span>(<span class="ruby-identifier">father_object</span>, <span class="ruby-identifier">father</span>,  <span class="ruby-value str">&quot;document&quot;</span>)
335:       <span class="ruby-identifier">docs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span>
336:           <span class="ruby-identifier">d</span>=<span class="ruby-constant">Document</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">child_id</span>)
337:           <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'documents'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{d.id}&quot;</span>}        
338:           <span class="ruby-identifier">destroy_url</span>=<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ctrl</span>.<span class="ruby-identifier">controller_name</span>,
339:                               <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;remove_link&quot;</span>,
340:                               <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{link.id}&quot;</span> )
341:           <span class="ruby-identifier">cut_a</span>=<span class="ruby-value str">'&lt;a href=&quot;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">destroy_url</span><span class="ruby-operator">+</span><span class="ruby-value str">'&quot;&gt;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">img_cut</span><span class="ruby-operator">+</span><span class="ruby-value str">'&lt;/a&gt;'</span>   
342:           <span class="ruby-identifier">options</span>={
343:                    <span class="ruby-identifier">:label</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">link</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">||</span><span class="ruby-value str">'no_relation'</span>)<span class="ruby-operator">+</span><span class="ruby-value str">'-'</span><span class="ruby-operator">+</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_document</span>)<span class="ruby-operator">+</span><span class="ruby-value str">':'</span><span class="ruby-operator">+</span><span class="ruby-identifier">d</span>.<span class="ruby-identifier">ident</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">cut_a</span>,
344:                    <span class="ruby-identifier">:icon=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">icone</span>(<span class="ruby-identifier">d</span>),
345:                    <span class="ruby-comment cmt">#:icon_open=&gt;icone(d),</span>
346:                    <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">designation</span>,
347:                    <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
348:                    <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>)
349:           }
350:           <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>,<span class="ruby-keyword kw">nil</span>)          
351:           <span class="ruby-identifier">node</span><span class="ruby-operator">&lt;&lt;</span><span class="ruby-identifier">cnode</span>   
352:       <span class="ruby-keyword kw">end</span>
353:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000357" class="method-detail">
        <a name="M000357"></a>

        <div class="method-heading">
          <a href="#M000357" class="method-signature">
          <span class="method-name">tree_forums</span><span class="method-args">(node, father_object, father,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000357-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000357-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 354</span>
354:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tree_forums</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">father_object</span>, <span class="ruby-identifier">father</span>,<span class="ruby-identifier">ctrl</span>)
355:       <span class="ruby-identifier">docs</span>=<span class="ruby-constant">Link</span>.<span class="ruby-identifier">find_childs</span>(<span class="ruby-identifier">father_object</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">father</span>,  <span class="ruby-value str">&quot;forum&quot;</span>)
356:       <span class="ruby-identifier">docs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span>
357:           <span class="ruby-identifier">d</span>=<span class="ruby-constant">Forum</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">link</span>.<span class="ruby-identifier">child_id</span>)
358:           <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'forums'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{d.id}&quot;</span>}        
359:           <span class="ruby-identifier">destroy_url</span>=<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ctrl</span>.<span class="ruby-identifier">controller_name</span>,
360:                               <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;remove_link&quot;</span>,
361:                               <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{link.id}&quot;</span> )
362:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">isFreeze</span>() <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span> 
363:               <span class="ruby-identifier">cut_a</span>=<span class="ruby-value str">'&lt;a href=&quot;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">destroy_url</span><span class="ruby-operator">+</span><span class="ruby-value str">'&quot;&gt;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">img_cut</span><span class="ruby-operator">+</span><span class="ruby-value str">'&lt;/a&gt;'</span>   
364:           <span class="ruby-keyword kw">else</span> 
365:               <span class="ruby-identifier">cut_a</span>=<span class="ruby-value str">&quot;&quot;</span>
366:           <span class="ruby-keyword kw">end</span>
367:           <span class="ruby-identifier">options</span>={
368:                    <span class="ruby-identifier">:label</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">link</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">||</span><span class="ruby-value str">'no_relation'</span>)<span class="ruby-operator">+</span><span class="ruby-value str">'-'</span><span class="ruby-operator">+</span><span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_forum</span>)<span class="ruby-operator">+</span><span class="ruby-value str">':'</span><span class="ruby-operator">+</span><span class="ruby-identifier">d</span>.<span class="ruby-identifier">subject</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">cut_a</span>,
369:                    <span class="ruby-identifier">:icon=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">icone</span>(<span class="ruby-identifier">d</span>),
370:                    <span class="ruby-comment cmt">#:icon_open=&gt;icone(d),</span>
371:                    <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">subject</span>,
372:                    <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
373:                    <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>)
374:           }
375:           <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>,<span class="ruby-keyword kw">nil</span>)          
376:           <span class="ruby-identifier">node</span><span class="ruby-operator">&lt;&lt;</span><span class="ruby-identifier">cnode</span>   
377:       <span class="ruby-keyword kw">end</span>
378:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000344" class="method-detail">
        <a name="M000344"></a>

        <div class="method-heading">
          <a href="#M000344" class="method-signature">
          <span class="method-name">tree_part</span><span class="method-args">(obj, link,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000344-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000344-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tree_part</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">link</span>,<span class="ruby-identifier">ctrl</span>) 
123:     <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">obj!</span>=<span class="ruby-keyword kw">nil</span>) 
124:       <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'parts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{obj.id}&quot;</span>}
125:       <span class="ruby-identifier">link_to_remote</span>= {
126:              <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url</span>,
127:              <span class="ruby-identifier">:update</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>,
128:              <span class="ruby-identifier">:base</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>
129:       }
130:       <span class="ruby-identifier">link_to</span>= <span class="ruby-identifier">url</span>
131:       <span class="ruby-identifier">destroy_url</span>=<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ctrl</span>.<span class="ruby-identifier">controller_name</span>,
132:                                                    <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;remove_link&quot;</span>,
133:                                                    <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">link</span>.<span class="ruby-identifier">id</span>)
134:       <span class="ruby-identifier">cut_a</span>=<span class="ruby-value str">'&lt;a href=&quot;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">destroy_url</span><span class="ruby-operator">+</span><span class="ruby-value str">'&quot;&gt;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">img_cut</span><span class="ruby-operator">+</span><span class="ruby-value str">'&lt;/a&gt;'</span> 
135:       <span class="ruby-identifier">options</span>={
136:               <span class="ruby-identifier">:label</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_part</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;:&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">ident</span><span class="ruby-operator">+</span><span class="ruby-identifier">cut_a</span>,
137:               <span class="ruby-identifier">:icon=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">icone</span>(<span class="ruby-identifier">obj</span>),
138:         <span class="ruby-comment cmt">#:title =&gt; obj.id.to_s,</span>
139:               <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">designation</span>,
140:               <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>),
141:               <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
142:       }
143:       <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)                              
144:     <span class="ruby-keyword kw">else</span>
145:       <span class="ruby-identifier">cnode</span>=<span class="ruby-keyword kw">nil</span>
146:     <span class="ruby-keyword kw">end</span>
147:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">cnode</span>
148:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000345" class="method-detail">
        <a name="M000345"></a>

        <div class="method-heading">
          <a href="#M000345" class="method-signature">
          <span class="method-name">tree_project</span><span class="method-args">(obj, link,ctrl)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000345-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000345-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/plm_object_controller_module.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tree_project</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">link</span>,<span class="ruby-identifier">ctrl</span>)
151:     <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">obj!</span>=<span class="ruby-keyword kw">nil</span>) 
152:       <span class="ruby-identifier">url</span>={<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'projects'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{obj.id}&quot;</span>}
153:       <span class="ruby-identifier">destroy_url</span>=<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ctrl</span>.<span class="ruby-identifier">controller_name</span>,
154:                                                  <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;remove_link&quot;</span>,
155:                                                  <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">link</span>.<span class="ruby-identifier">id</span>)
156:       <span class="ruby-identifier">cut_a</span>=<span class="ruby-value str">'&lt;a href=&quot;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">destroy_url</span><span class="ruby-operator">+</span><span class="ruby-value str">'&quot;&gt;'</span><span class="ruby-operator">+</span><span class="ruby-identifier">img_cut</span><span class="ruby-operator">+</span><span class="ruby-value str">'&lt;/a&gt;'</span> 
157:       <span class="ruby-identifier">options</span>={
158:                         <span class="ruby-identifier">:label</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">:ctrl_project</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;:&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">ident</span><span class="ruby-operator">+</span><span class="ruby-identifier">cut_a</span>,
159:                         <span class="ruby-identifier">:icon=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">icone</span>(<span class="ruby-identifier">obj</span>),
160:                         <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">designation</span>,
161:                         <span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
162:                         <span class="ruby-identifier">:url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>)
163:       }
164:       <span class="ruby-identifier">cnode</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>,<span class="ruby-keyword kw">nil</span>)                        
165:     <span class="ruby-keyword kw">else</span>
166:       <span class="ruby-identifier">cnode</span>=<span class="ruby-keyword kw">nil</span>
167:     <span class="ruby-keyword kw">end</span> 
168:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">cnode</span>
169:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>